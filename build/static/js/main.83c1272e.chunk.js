(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],Array(31).concat([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(21),i=a.n(s),r=(a(31),a(32),a(4)),o=a(20),l=a(2),u=(a(33),a(3)),j=c.a.createContext(),b=a(14),m=a(15),h=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(b.a)(this,e),this._headers=n,this._baseUrl=a}return Object(m.a)(e,[{key:"setToken",value:function(e){this._token=e}},{key:"clearToken",value:function(){this._token=null}},{key:"getUserData",value:function(){return this._fetcher("/users/me","GET")}},{key:"createUser",value:function(e){return this._fetcher("/signup","POST",e)}},{key:"signInUser",value:function(e){return this._fetcher("/signin","POST",e)}},{key:"getSavedMovies",value:function(){return this._fetcher("/movies","GET")}},{key:"uploadNewMovie",value:function(e){return this._fetcher("/movies","POST",e)}},{key:"updateUserData",value:function(e){return this._fetcher("/users/me","PATCH",e)}},{key:"deleteMovie",value:function(e){return this._fetcher("/movies/".concat(e),"DELETE")}},{key:"_fetcher",value:function(e,t,a){var n=this._headers;this._token&&(n.Authorization="Bearer ".concat(this._token));var c={method:t,headers:n};return a&&(c.body=JSON.stringify(a)),fetch("".concat(this._baseUrl).concat(e),c).then((function(e){return e.ok?e.json():Promise.reject(e)}))}}]),e}())({baseUrl:"https://api.kiriii2511.students.nomoredomains.work",headers:{"Content-Type":"application/json"}}),d=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(b.a)(this,e),this._headers=n,this._baseUrl=a}return Object(m.a)(e,[{key:"getMovies",value:function(){return this._fetcher()}},{key:"_fetcher",value:function(){var e={method:"GET",headers:this._headers};return fetch(this._baseUrl,e).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}}]),e}())({baseUrl:"https://api.nomoreparties.co/beatfilm-movies",headers:{"Content-Type":"application/json"}}),f=(a(34),a(35),a(10)),_=a.p+"static/media/logo.be2d72c0.svg",O=a(0),v=function(e){var t=e.place;return Object(O.jsx)(r.b,{to:"/",className:"logo logo_place_".concat(t),children:Object(O.jsx)(f.a,{className:"logo__image",src:_})})},x=(a(45),a.p+"static/media/icon__COLOR_icon-main.bc3f6448.svg");var p=function(e){var t=e.setsMobileMenuOpened;return Object(O.jsx)("button",{className:"burger-menu",onClick:function(){t(!0)},children:Object(O.jsx)(f.a,{className:"burger-menu__icon",src:x})})};a(46);var g=function(e){var t=e.openAccount,a=e.place,n="/profile"===Object(u.h)().pathname?"account-link_active":"";return Object(O.jsx)("button",{className:"account-link account-link_place_".concat(a," ").concat(n),onClick:t,children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})};var N=function(e){var t=e.setsMobileMenuOpened,a=e.isLoggedIn,n=Object(u.g)();return Object(O.jsxs)("header",{className:"header",children:[Object(O.jsx)("nav",{className:"header__nav",children:Object(O.jsx)(v,{place:"header"})}),Object(O.jsxs)("nav",{className:"header__nav",children:[a&&Object(O.jsx)(r.b,{className:"header__link header__link_type_movies",to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),a&&Object(O.jsx)(r.b,{className:"header__link header__link_type_movies",to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),!a&&Object(O.jsx)(r.b,{className:"header__link header__link_type_signup",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),!a&&Object(O.jsx)(r.b,{className:"header__link header__link_type_signin",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"}),a&&Object(O.jsx)(g,{openAccount:function(){n.push("/profile")},place:"header"}),a&&Object(O.jsx)(p,{setsMobileMenuOpened:t})]})]})};a(47);var k=function(){return Object(O.jsxs)("footer",{className:"footer",children:[Object(O.jsx)("h2",{className:"footer__heading",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(O.jsxs)("div",{className:"footer__media-info",children:[Object(O.jsx)("p",{className:"footer__copyright",children:"\xa92020"}),Object(O.jsxs)("ul",{className:"footer__links",children:[Object(O.jsx)("li",{className:"footer__link-item",children:Object(O.jsx)("a",{className:"footer__link",href:"http://ya.ru",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(O.jsx)("li",{className:"footer__link-item",children:Object(O.jsx)("a",{className:"footer__link",href:"http://ya.ru",children:"Github"})}),Object(O.jsx)("li",{className:"footer__link-item",children:Object(O.jsx)("a",{className:"footer__link",href:"http://ya.ru",children:"Facebook"})})]})]})]})},S=(a(48),a(49),function(){return Object(O.jsx)("section",{className:"promo",children:Object(O.jsx)("div",{className:"promo__content",children:Object(O.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})})});a(50);var M=function(){return Object(O.jsx)("nav",{className:"navtab",children:Object(O.jsxs)("ul",{className:"navtab__list",children:[Object(O.jsx)("li",{className:"navtab__list-item",children:Object(O.jsx)("a",{className:"navtab__list-link",href:"#about",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(O.jsx)("li",{className:"navtab__list-item",children:Object(O.jsx)("a",{className:"navtab__list-link",href:"#techs",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(O.jsx)("li",{className:"navtab__list-item",children:Object(O.jsx)("a",{className:"navtab__list-link",href:"#me",children:"\u041e\u0431\u043e \u043c\u043d\u0435"})})]})})};a(51);var w=function(){return Object(O.jsxs)("section",{id:"about",className:"about",children:[Object(O.jsx)("h2",{className:"about__title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(O.jsxs)("ul",{className:"about-info about__about-info",children:[Object(O.jsxs)("li",{className:"about-info__item",children:[Object(O.jsx)("h3",{className:"about-info__heading",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(O.jsx)("p",{className:"about-info__paragraph",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(O.jsxs)("li",{className:"about-info__item",children:[Object(O.jsx)("h3",{className:"about-info__heading",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(O.jsx)("p",{className:"about-info__paragraph",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(O.jsxs)("div",{className:"about-timing about__about-timing",children:[Object(O.jsx)("p",{className:"about-timing__time about-timing__time_back",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(O.jsx)("p",{className:"about-timing__time about-timing__time_front",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(O.jsx)("p",{className:"about-timing__action",children:"Back-end"}),Object(O.jsx)("p",{className:"about-timing__action",children:"Front-end"})]})]})};a(52);var y=function(){return Object(O.jsx)("section",{id:"techs",className:"techs",children:Object(O.jsxs)("div",{className:"techs__content",children:[Object(O.jsx)("h2",{className:"techs__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(O.jsx)("h3",{className:"techs__number",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(O.jsx)("p",{className:"techs__description",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(O.jsxs)("ul",{className:"techs__list",children:[Object(O.jsx)("li",{className:"techs__list-item",children:"HTML"}),Object(O.jsx)("li",{className:"techs__list-item",children:"CSS"}),Object(O.jsx)("li",{className:"techs__list-item",children:"JS"}),Object(O.jsx)("li",{className:"techs__list-item",children:"React"}),Object(O.jsx)("li",{className:"techs__list-item",children:"Git"}),Object(O.jsx)("li",{className:"techs__list-item",children:"Express.js"}),Object(O.jsx)("li",{className:"techs__list-item",children:"mongoDB"})]})]})})},E=(a(53),a.p+"static/media/me.b84eb0e1.png"),I=(a(54),function(){return Object(O.jsxs)("div",{className:"portfolio",children:[Object(O.jsx)("h5",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(O.jsxs)("ul",{className:"portfolio__list",children:[Object(O.jsx)("li",{className:"portfolio__list-item",children:Object(O.jsx)("a",{className:"portfolio__link",target:"_blanc",href:"",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(O.jsx)("li",{className:"portfolio__list-item",children:Object(O.jsx)("a",{className:"portfolio__link",target:"_blanc",href:"",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(O.jsx)("li",{className:"portfolio__list-item",children:Object(O.jsx)("a",{className:"portfolio__link",target:"_blanc",href:"",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})})]})]})});var C=function(){return Object(O.jsxs)("section",{id:"me",className:"aboutme",children:[Object(O.jsx)("h2",{className:"aboutme__title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(O.jsxs)("div",{className:"aboutme-info",children:[Object(O.jsx)("img",{className:"aboutme-info__foto",alt:"\u0424\u043e\u0442\u043e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",src:E}),Object(O.jsxs)("div",{className:"aboutme-info__bio",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:"aboutme-info__name",children:"\u0412\u0438\u0442\u0430\u043b\u0438\u0439"}),Object(O.jsx)("p",{className:"aboutme-info__short",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 30 \u043b\u0435\u0442"}),Object(O.jsx)("p",{className:"aboutme-info__description",children:"\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0438 \u0436\u0438\u0432\u0443 \u0432 \u0421\u0430\u0440\u0430\u0442\u043e\u0432\u0435, \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0421\u0413\u0423. \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u0436\u0435\u043d\u0430 \u0438 \u0434\u043e\u0447\u044c. \u042f \u043b\u044e\u0431\u043b\u044e \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0430 \u0435\u0449\u0451 \u0443\u0432\u043b\u0435\u043a\u0430\u044e\u0441\u044c \u0431\u0435\u0433\u043e\u043c. \u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043d\u0430\u0447\u0430\u043b \u043a\u043e\u0434\u0438\u0442\u044c. \u0421 2015 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \xab\u0421\u041a\u0411 \u041a\u043e\u043d\u0442\u0443\u0440\xbb. \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0448\u0451\u043b \u043a\u0443\u0440\u0441 \u043f\u043e \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435, \u043d\u0430\u0447\u0430\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0444\u0440\u0438\u043b\u0430\u043d\u0441-\u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438 \u0443\u0448\u0451\u043b \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b."})]}),Object(O.jsxs)("ul",{className:"aboutme-info__links",children:[Object(O.jsx)("li",{className:"aboutme-info__link-item",children:Object(O.jsx)("a",{className:"aboutme-info__link",href:"https://www.facebook.com/",children:"Facebook"})}),Object(O.jsx)("li",{className:"aboutme-info__link-item",children:Object(O.jsx)("a",{className:"aboutme-info__link",href:"https://github.com/",children:"Github"})})]})]})]}),Object(O.jsx)(I,{})]})};var T=function(){return Object(O.jsxs)("main",{className:"main",children:[Object(O.jsx)(S,{}),Object(O.jsx)(M,{}),Object(O.jsx)(w,{}),Object(O.jsx)(y,{}),Object(O.jsx)(C,{})]})};a(55),a(56),a(57);var V=function(e){var t=e.isShortFilm,a=e.handleCheckBox,n=t?"":"filter-checkbox__label_active";return Object(O.jsxs)("div",{className:"filter-checkbox",children:[Object(O.jsx)("label",{className:"filter-checkbox__label ".concat(n),htmlFor:"filtercheckbox",children:Object(O.jsx)("input",{className:"filter-checkbox__input",type:"checkbox",checked:t,onChange:a,id:"filtercheckbox"})}),Object(O.jsx)("span",{className:"filter-checkbox__text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})};var B=function(e){var t=e.isShortFilm,a=e.handleCheckBox,n=e.handleSearchBtn,c=e.setSearchText,s=e.searchText;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),n(s),c("")},children:[Object(O.jsx)("input",{className:"search-form__input",type:"text",placeholder:"\u0424\u0438\u043b\u044c\u043c",onChange:function(e){c(e.target.value)},value:s,required:!0}),Object(O.jsx)("button",{className:"search-form__btn",type:"submit",disabled:s.length<1,children:"\u041d\u0430\u0439\u0442\u0438"})]}),Object(O.jsx)(V,{isShortFilm:t,handleCheckBox:a})]})},U=(a(58),a(59),a.p+"static/media/icon__COLOR_invisible.2300e3bb.svg"),F=a.p+"static/media/icon__COLOR_icon-delete.c46b63f9.svg";var L=function(e){var t="",a=e/60,n=e%60;return a>=1&&(t+="".concat(Math.floor(a),"\u0447 ")),n>0&&(t+="".concat(n,"\u043c")),t};var D=function(e){var t,a=e.isSaved,n=e.movieData,c=e.handleMovieBtnClick,s=e.isSavedMovie;a||(t=s(n)?"movie__like_active":"");var i=a?"movie_type_saved":"",r=n.image?"".concat("https://api.nomoreparties.co").concat(n.image.url):"";return Object(O.jsxs)("article",{className:"movie ".concat(i),children:[Object(O.jsx)("a",{className:"student__link",href:n.trailerLink,target:"_blank",rel:"noreferrer",title:'\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0442\u0440\u0435\u0439\u043b\u0435\u0440 \u0444\u0438\u043b\u044c\u043c\u0430 "'.concat(n.nameRU,'" \u043d\u0430 youtube.com'),children:Object(O.jsx)("img",{className:"movie__cover",src:r,alt:n.nameRU})}),Object(O.jsxs)("div",{className:"movie__info",children:[Object(O.jsx)("h5",{className:"movie__title",children:n.nameRU}),Object(O.jsx)("button",{className:"movie__btn",onClick:function(){c(n)},children:a?Object(O.jsx)(f.a,{className:"movie__delete",src:F}):Object(O.jsx)(f.a,{className:"movie__like ".concat(t),src:U})}),Object(O.jsx)("p",{className:"movie__duration",children:L(n.duration)})]})]})};var P=function(e){var t=e.moviesList,a=e.isSaved,n=e.handleMovieBtnClick,c=e.limit,s=e.isSavedMovie,i=t.slice(0,c);return Object(O.jsx)("section",{className:"movies-list",children:i.map((function(e){return Object(O.jsx)(D,{movieData:e,isSaved:a,handleMovieBtnClick:n,isSavedMovie:s},e.id)}))})},J=(a(60),function(){return Object(O.jsx)("div",{className:"preloader",children:Object(O.jsx)("div",{className:"preloader__container",children:Object(O.jsx)("span",{className:"preloader__round"})})})});var R=function(e){var t=0;return e>1100?t=4:e>850&&e<=1100?t=3:e>=500&&e<=850?t=2:e<500&&(t=1),t},A=(a(61),function(){return Object(O.jsx)("p",{className:"movies-not-found",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})});var G=function(e){var t=e.isSaved,a=e.handleMovieBtnClick,n=e.movies,s=e.isLoading,i=e.width,r=e.handleSearchBtn,o=e.cleanFilter,u=e.isSavedMovie,j=e.isSorted,b=e.setIsSorted,m=c.a.useState(""),h=Object(l.a)(m,2),d=h[0],f=h[1],_=c.a.useState(!1),v=Object(l.a)(_,2),x=v[0],p=v[1],g=c.a.useState(R(i)),N=Object(l.a)(g,2),k=N[0],S=N[1],M=c.a.useState(0),w=Object(l.a)(M,2),y=w[0],E=w[1];function I(e){return e.filter((function(e){return!x||e.duration<=40}))}return c.a.useEffect((function(){return function(){o()}}),[]),c.a.useEffect((function(){E(R(i))}),[i]),c.a.useEffect((function(){S(R(i))}),[n]),Object(O.jsxs)("main",{className:"movies",children:[Object(O.jsx)(B,{isShortFilm:x,handleCheckBox:function(){b(!0),p(!x)},handleSearchBtn:function(){b(!0),r(d)},setSearchText:f,searchText:d}),s&&Object(O.jsx)(J,{}),0===n.length&&t&&!j&&Object(O.jsx)("p",{className:"movies__nothing-saved",children:"\u041f\u043e\u043a\u0430 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430"}),0===I(n).length&&j&&!s&&Object(O.jsx)(A,{}),Object(O.jsx)(P,{limit:k,moviesList:I(n),isSaved:t,handleMovieBtnClick:a,isSavedMovie:u}),I(n).length>k&&Object(O.jsx)("button",{className:"movies__show-more",onClick:function(){S(k+y)},children:"\u0415\u0449\u0435"})]})};var z=function(e,t){var a={isValid:!1,err:""};switch(e){case"email":a.isValid=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(t),a.err=a.isValid?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email";break;case"password":a.isValid=t.length>=6,a.err=a.isValid?"":"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432";break;case"name":a.isValid=/^[a-zA-Z- ]+$/.test(t),a.err=a.isValid?"":"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0438\u0446\u0443, \u043f\u0440\u043e\u0431\u0435\u043b \u0438\u043b\u0438 \u0434\u0435\u0444\u0438\u0441."}return a};a(62);var $=function(e){var t="";switch(e){case 409:t="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.";break;case 401:t="\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c."}return t};var q=function(e){var t=e.setCurrentUser,a=e.signOut,n=c.a.useState(""),s=Object(l.a)(n,2),i=s[0],r=s[1],o=c.a.useState(!0),u=Object(l.a)(o,2),b=u[0],m=u[1],d=c.a.useState(""),f=Object(l.a)(d,2),_=f[0],v=f[1],x=c.a.useState(!0),p=Object(l.a)(x,2),g=p[0],N=p[1],k=c.a.useState(!1),S=Object(l.a)(k,2),M=S[0],w=S[1],y=c.a.useState(!1),E=Object(l.a)(y,2),I=E[0],C=E[1],T=c.a.useState(""),V=Object(l.a)(T,2),B=V[0],U=V[1],F=c.a.useState(!1),L=Object(l.a)(F,2),D=L[0],P=L[1],J=c.a.useState(!1),R=Object(l.a)(J,2),A=R[0],G=R[1],q=c.a.useContext(j),H=I||!D?"profile__submit-btn_disabled":"",W=b?"":"profile__input_invalid",Z=g?"":"profile__input_invalid";function K(e){C(!e.isValid),U(e.err)}return c.a.useEffect((function(){r(q.name),v(q.email)}),[q]),c.a.useEffect((function(){q.name!==i||q.email!==_?P(!0):P(!1),b&&g?(C(!1),U("")):C(!0)}),[i,_]),Object(O.jsxs)("div",{className:"profile",children:[A&&Object(O.jsx)("div",{className:"profile__success",children:Object(O.jsx)("p",{className:"profile__text",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b."})}),Object(O.jsxs)("h3",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442 ",q.name,"!"]}),Object(O.jsxs)("form",{className:"profile__form",onSubmit:function(e){e.preventDefault();var a={};if(q.name!==i)a.name=i;else{if(q.email===_)return;a.email=_}h.updateUserData(a).then((function(e){e.data&&(G(!0),w(!1),t(e.data),setTimeout((function(){G(!1)}),1500))})).catch((function(e){C(!0),U($(e.status))}))},children:[Object(O.jsxs)("label",{className:"profile__input-label",htmlFor:"name",children:["\u0418\u043c\u044f",Object(O.jsx)("input",{className:"profile__input ".concat(W),type:"text",name:"name",value:i||"",disabled:!M,onChange:function(e){var t=z(e.target.name,e.target.value);m(t.isValid),t.isValid||K(t),r(e.target.value)}})]}),Object(O.jsxs)("label",{className:"profile__input-label",htmlFor:"email",children:["\u041f\u043e\u0447\u0442\u0430",Object(O.jsx)("input",{className:"profile__input ".concat(Z),type:"email",name:"email",value:_||"",disabled:!M,onChange:function(e){var t=z(e.target.name,e.target.value);N(t.isValid),t.isValid||K(t),v(e.target.value)}})]}),Object(O.jsx)("span",{className:"profile__error-message",children:B}),M&&Object(O.jsx)("button",{type:"submit",className:"profile__submit-btn ".concat(H),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),!M&&Object(O.jsx)("button",{type:"button",className:"profile__edit-btn",onClick:function(){w(!M)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),!M&&Object(O.jsx)("button",{type:"button",className:"profile__sign-out-btn",onClick:a,children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})},H=(a(63),a(64),function(e){var t=e.text,a=e.to,n=e.linkText;return Object(O.jsxs)("p",{className:"have-account",children:["".concat(t," "),Object(O.jsx)(r.b,{to:a,className:"have-account__link",children:n})]})});var W=function(e){var t=e.title,a=e.children,n=Object(u.h)();return Object(O.jsx)("div",{className:"user",children:Object(O.jsxs)("div",{className:"user-container",children:[Object(O.jsx)(v,{place:"user"}),Object(O.jsx)("h3",{className:"user__title",children:t}),a,"/signup"===n.pathname&&Object(O.jsx)(H,{text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",to:"/signin",linkText:"\u0412\u043e\u0439\u0442\u0438"}),"/signin"===n.pathname&&Object(O.jsx)(H,{text:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",to:"/signup",linkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})};a(65);var Z=function(e){var t=e.handleFormSubmit,a=e.children;return Object(O.jsx)("form",{className:"form",onSubmit:t,noValidate:!0,children:a})};a(66);var K=function(e){var t=e.type,a=e.value,n=e.handleNameInput,c=e.isValid,s=e.inputName,i=c?"":"form-input_invalid";return Object(O.jsx)("input",{className:"form-input ".concat(i),type:t,value:a||"",onChange:n,name:s,required:!0})},Q=(a(67),function(e){var t=e.label,a=e.name,n=e.children;return Object(O.jsxs)("label",{className:"form-label",htmlFor:a,children:[Object(O.jsx)("span",{className:"form-label__text",children:t}),n]})});a(68);var X=function(e){var t=e.text,a=e.isDisabledBtn,n=a?"form-submit-btn_disabled":"";return Object(O.jsx)("button",{type:"submit",className:"form-submit-btn ".concat(n),disabled:a,children:t})};a(69);var Y=function(e){var t=e.errorMsg,a=e.isError?"form-error-message_active":"";return Object(O.jsx)("p",{className:"form-error-message ".concat(a),children:t})};var ee=function(e){var t=e.handleSignUp,a=e.setErrorMsg,n=e.errorMsg,s=e.isError,i=e.setIsError,r=c.a.useState(""),o=Object(l.a)(r,2),u=o[0],j=o[1],b=c.a.useState(!0),m=Object(l.a)(b,2),h=m[0],d=m[1],f=c.a.useState(""),_=Object(l.a)(f,2),v=_[0],x=_[1],p=c.a.useState(!0),g=Object(l.a)(p,2),N=g[0],k=g[1],S=c.a.useState(""),M=Object(l.a)(S,2),w=M[0],y=M[1],E=c.a.useState(!0),I=Object(l.a)(E,2),C=I[0],T=I[1],V=c.a.useState(!0),B=Object(l.a)(V,2),U=B[0],F=B[1];return c.a.useEffect((function(){return function(){i(!1)}}),[]),c.a.useEffect((function(){F(!(h&&N&&C&&u&&v&&w))}),[h,N,C]),Object(O.jsxs)(Z,{handleFormSubmit:function(e){e.preventDefault(),t({name:u,email:v,password:w})},children:[Object(O.jsx)(Q,{label:"\u0418\u043c\u044f",name:"name",children:Object(O.jsx)(K,{type:"text",value:u,handleNameInput:function(e){var t=z(e.target.name,e.target.value);j(e.target.value),d(t.isValid),i(!t.isValid),a(t.err)},isValid:h,inputName:"name"})}),Object(O.jsx)(Q,{label:"E-mail",name:"email",children:Object(O.jsx)(K,{type:"email",value:v,handleNameInput:function(e){var t=z(e.target.name,e.target.value);x(e.target.value),k(t.isValid),i(!t.isValid),a(t.err)},isValid:N,inputName:"email"})}),Object(O.jsx)(Q,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",children:Object(O.jsx)(K,{type:"password",value:w,handleNameInput:function(e){var t=z(e.target.name,e.target.value);y(e.target.value),T(t.isValid),i(!t.isValid),a(t.err)},isValid:C,inputName:"password"})}),Object(O.jsx)(Y,{errorMsg:n,isError:s}),Object(O.jsx)(X,{text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",isDisabledBtn:U,setIsDisabledBtn:F})]})};var te=function(e){var t=e.handleSignIn,a=e.setErrorMsg,n=e.errorMsg,s=e.isError,i=e.setIsError,r=c.a.useState(""),o=Object(l.a)(r,2),u=o[0],j=o[1],b=c.a.useState(!0),m=Object(l.a)(b,2),h=m[0],d=m[1],f=c.a.useState(""),_=Object(l.a)(f,2),v=_[0],x=_[1],p=c.a.useState(!0),g=Object(l.a)(p,2),N=g[0],k=g[1],S=c.a.useState(!1),M=Object(l.a)(S,2),w=M[0],y=M[1];return c.a.useEffect((function(){y(!(h&&N&&u&&v))}),[h,N]),c.a.useEffect((function(){return function(){i(!1)}}),[]),Object(O.jsxs)(Z,{handleFormSubmit:function(e){e.preventDefault(),t({email:u,password:v})},children:[Object(O.jsx)(Q,{label:"E-mail",children:Object(O.jsx)(K,{type:"email",value:u,handleNameInput:function(e){var t=z(e.target.name,e.target.value);j(e.target.value),d(t.isValid),i(!t.isValid),a(t.err)},isValid:h,inputName:"email"})}),Object(O.jsx)(Q,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",children:Object(O.jsx)(K,{type:"password",value:v,handleNameInput:function(e){var t=z(e.target.name,e.target.value);x(e.target.value),k(t.isValid),i(!t.isValid),a(t.err)},isValid:N,inputName:"password"})}),Object(O.jsx)(Y,{errorMsg:n,isError:s}),Object(O.jsx)(X,{text:"\u0412\u043e\u0439\u0442\u0438",isDisabledBtn:w})]})};a(70),a(71);var ae=function(e){var t=e.path,a=e.linkText,n=e.setsMobileMenuOpened,c=Object(u.g)(),s=Object(u.h)().pathname===t?"mobile-link_active":"";return Object(O.jsx)("button",{className:"mobile-link ".concat(s),onClick:function(e){e.stopPropagation(),c.push(t),n(!1)},children:a})};var ne=function(e){var t=e.setsMobileMenuOpened,a=e.isMobileMenuOpened,n=Object(u.g)(),c=a?"mobile-menu_active":"";function s(){t(!1)}return Object(O.jsx)("div",{className:"mobile-menu ".concat(c),children:Object(O.jsxs)("nav",{className:"mobile-menu__navigation",children:[Object(O.jsx)("button",{className:"mobile-menu__close-btn",onClick:s}),Object(O.jsx)(ae,{setsMobileMenuOpened:t,path:"/",linkText:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(O.jsx)(ae,{setsMobileMenuOpened:t,path:"/movies",linkText:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(O.jsx)(ae,{setsMobileMenuOpened:t,path:"/saved-movies",linkText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(O.jsx)(g,{openAccount:function(){n.push("/profile"),s()},place:"mobile-menu"})]})})},ce=(a(72),function(){return Object(O.jsxs)("div",{className:"page-not-found",children:[Object(O.jsx)("h3",{className:"page-not-found__title",children:"404"}),Object(O.jsx)("p",{className:"page-not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(O.jsx)(r.b,{to:"/",className:"page-not-found__back-btn",children:"\u041d\u0430\u0437\u0430\u0434"})]})}),se=a(25),ie=a(24),re=function(e){var t=e.component,a=e.isLoggedIn,n=e.path,c=Object(ie.a)(e,["component","isLoggedIn","path"]);return Object(O.jsx)(u.b,{path:n,children:function(){return a?Object(O.jsx)(t,Object(se.a)({},c)):Object(O.jsx)(u.a,{to:"/"})}})};var oe=function(e){for(var t=e.replace(/[\xbb\xab.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ").split(" "),a="",n=0;n<t.length;)a+="(".concat(t[n],"){1}.?"),n+=1;return new RegExp(a,"gmi")};var le=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],s=t[1],i=c.a.useState({}),r=Object(l.a)(i,2),b=r[0],m=r[1],f=c.a.useState(!1),_=Object(l.a)(f,2),v=_[0],x=_[1],p=c.a.useState(!1),g=Object(l.a)(p,2),S=g[0],M=g[1],w=c.a.useState([]),y=Object(l.a)(w,2),E=y[0],I=y[1],C=c.a.useState([]),V=Object(l.a)(C,2),B=V[0],U=V[1],F=c.a.useState([]),L=Object(l.a)(F,2),D=L[0],P=L[1],J=c.a.useState(window.innerWidth),R=Object(l.a)(J,2),A=R[0],z=R[1],H=c.a.useState(!1),Z=Object(l.a)(H,2),K=Z[0],Q=Z[1],X=c.a.useState(""),Y=Object(l.a)(X,2),ae=Y[0],se=Y[1],ie=c.a.useState(!1),le=Object(l.a)(ie,2),ue=le[0],je=le[1],be=c.a.useState(!1),me=Object(l.a)(be,2),he=me[0],de=me[1],fe=c.a.useState(""),_e=Object(l.a)(fe,2),Oe=_e[0],ve=_e[1],xe=c.a.useState(!1),pe=Object(l.a)(xe,2),ge=pe[0],Ne=pe[1],ke=Object(u.h)(),Se=Object(u.g)();function Me(){h.getUserData().then((function(e){e?(m(e.data),h.getSavedMovies().then((function(e){if(!e)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432");U(e.data),P(e.data)})).catch((function(e){console.log(e)})),x(!0)):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")})).catch((function(){x(!1),localStorage.removeItem("jwt"),localStorage.removeItem("movies")}))}function we(e){return B.find((function(t){return Number(t.id)===Number(e.id)}))}function ye(e){h.deleteMovie(e).then((function(e){if(!e)throw new Error("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");var t=B.filter((function(t){return t.id!==e.data.id}));U(t),P(t)})).catch((function(e){console.log(e)}))}function Ee(e){h.signInUser(e).then((function(e){e?(localStorage.setItem("jwt",e.token),h.setToken(e.token),Me(),x(!0),Se.push("/movies")):(ve("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),Ne(!0))})).catch((function(e){ve($(e.status)),Ne(!0)}))}function Ie(e,t){var a=oe(t);return e.filter((function(e){return a.test(e.nameRU)}))}function Ce(e){M(!0);var t=JSON.parse(localStorage.getItem("movies"));t?(I(Ie(t,e)),localStorage.setItem("searchedMovies",JSON.stringify(Ie(t,e))),M(!1)):d.getMovies().then((function(t){if(!t)throw M(!1),new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u043e\u0432");localStorage.setItem("movies",JSON.stringify(t)),I(Ie(t,e)),localStorage.setItem("searchedMovies",JSON.stringify(Ie(t,e))),M(!1)})).catch((function(e){M(!1),console.log(e)}))}return c.a.useEffect((function(){var e=ke.pathname,t=localStorage.getItem("jwt");!v&&["/profile","/movies","/saved-movies"].includes(e)&&t?se(e):"/"!==ae&&(Se.push(ae),se(""))}),[v]),c.a.useEffect((function(){var e=localStorage.getItem("jwt");e?(h.setToken(e),Me()):x(!1);var t=localStorage.getItem("searchedMovies");t&&I(JSON.parse(t))}),[]),Object(n.useLayoutEffect)((function(){function e(){K||(Q(!0),setTimeout((function(){z(window.innerWidth),Q(!1)}),700))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(O.jsx)("div",{className:"page",children:Object(O.jsxs)(j.Provider,{value:b,children:[Object(O.jsx)(N,{setsMobileMenuOpened:s,isLoggedIn:v}),Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{exact:!0,path:"/",children:Object(O.jsx)(T,{})}),Object(O.jsx)(re,{path:"/movies",isLoggedIn:v,component:G,width:A,movies:E,handleMovieBtnClick:function(e){var t=we(e);t?ye(t._id):function(e){h.uploadNewMovie(e).then((function(e){if(!e)throw new Error("\u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");U([e.data].concat(Object(o.a)(B))),P([e.data].concat(Object(o.a)(B)))})).catch((function(e){console.log(e)}))}(e)},getMovies:Ce,isLoading:S,handleSearchBtn:function(e){Ce(e)},cleanFilter:function(){I([])},isSavedMovie:we,isSorted:ue,setIsSorted:je}),Object(O.jsx)(re,{path:"/saved-movies",isLoggedIn:v,component:G,width:A,movies:D,isSaved:!0,handleMovieBtnClick:function(e){ye(e._id)},setSavedMovies:U,handleSearchBtn:function(e){P(Ie(B,e))},cleanFilter:function(){P(B)},isSorted:he,setIsSorted:de}),Object(O.jsx)(re,{path:"/profile",isLoggedIn:v,component:q,setCurrentUser:m,signOut:function(){m({}),x(!1),localStorage.removeItem("jwt"),localStorage.removeItem("movies"),h.clearToken(),Se.push("/")}}),Object(O.jsx)(u.b,{path:"/signin",children:Object(O.jsx)(W,{title:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",children:Object(O.jsx)(te,{handleSignIn:Ee,setErrorMsg:ve,errorMsg:Oe,isError:ge,setIsError:Ne})})}),Object(O.jsx)(u.b,{path:"/signup",children:Object(O.jsx)(W,{title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",children:Object(O.jsx)(ee,{handleSignUp:function(e){var t=e.email,a=e.password;h.createUser(e).then((function(e){e&&Ee({email:t,password:a})})).catch((function(e){ve($(e.status)),Ne(!0)}))},setErrorMsg:ve,errorMsg:Oe,isError:ge,setIsError:Ne})})}),Object(O.jsx)(u.b,{path:"/*",children:Object(O.jsx)(ce,{})})]}),"/profile"!==ke.pathname&&Object(O.jsx)(k,{}),Object(O.jsx)(ne,{setsMobileMenuOpened:s,isMobileMenuOpened:a})]})})},ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(r.a,{children:Object(O.jsx)(le,{})})}),document.getElementById("root")),ue()}]),[[73,1,2]]]);
//# sourceMappingURL=main.83c1272e.chunk.js.map